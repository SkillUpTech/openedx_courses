{"start":[0,1240,2645,5010,7080,8735,10935,14820,16605,17740,20315,22290,24857,27904,30210,33960,35340,36540,37980,41730,42809,43425,47070,48840,50640,53155,56580,60050,62340,64785,66540,68880,71160,72780,75305,77325,79185,81240,82579,85135,88790,94070,95270,96860,99435,100679,104210,107630,110885,113405,115310,117620,120105,122005,123395,125310,127880,130055,131570,133190,134630,138275,141860,143540,144915,146856,147940,149540,151730,153800,154790,156770,159080,160715,165915,168240,173360,178310,180080,181770,184490,188570,191060,194220,196100,198380,199880,201190,202649,204665,208575,211865,213935,219050,226740,229485,232980,234545,236835,237930,238830,241620,244260,247050,254615,256365,259996,261925,264365,266365,268940,271490,273950,278575,282200,284060,286335,289130,290450,292560,295640,297615,300120,301610,303020,306580,308780,311180,314210,315530,318735,322060,328130,330765,331760,332810,335180,336521,339260,342905,344990,347066,349760,352660,356860,359320,362290,364420,367270,369580,372895,375610,378310,381895,386379,389140,391150,392590,395250,396825,398805,401345,403225,404378,405790,409445,411788,415180,418115,419440,421390,423850,427115,428800,431410,435250,437185,439550,441430,443230,445030,446860,448870,451030,453220],"end":[1240,2645,5010,7080,8735,10935,14820,16605,17740,20315,22290,24857,27904,30210,33960,35340,36540,37980,41730,42809,43425,47070,48840,50640,53155,56580,60050,62340,64785,66540,68880,71160,72780,75305,77325,79185,81240,82579,85135,88790,94070,95270,96860,99435,100679,104210,107630,110885,113405,115310,117620,120105,122005,123395,125310,127880,130055,131570,133190,134630,138275,141860,143540,144915,146856,147940,149540,151730,153800,154790,156770,159080,160715,165915,168240,173360,178310,180080,181770,184490,188570,191060,194220,196100,198380,199880,201190,202649,204665,208575,211865,213935,219050,226740,229485,232980,234545,236835,237930,238830,241620,244260,247050,254615,256365,259996,261925,264365,266365,268940,271490,273950,278575,282200,284060,286335,289130,290450,292560,295640,297615,300120,301610,303020,306580,308780,311180,314210,315530,318735,322060,328130,330765,331760,332810,335180,336521,339260,342905,344990,347066,349760,352660,356860,359320,362290,364420,367270,369580,372895,375610,378310,381895,386379,389140,391150,392590,395250,396825,398805,401345,403225,404378,405790,409445,411788,415180,418115,419440,421390,423850,427115,428800,431410,435250,437185,439550,441430,443230,445030,446860,448870,451030,453220,457000],"text":[">>All right. So Andrew,","I look at the portal about","Azure Cosmos DB and I see when you see about billing and","throughput and a lot of discussion about","Requests Units and","the various metrics associated with that,","and help me understand Request Units, what are they?","How do you relate to Cosmos DB?","How do they relate to","ultimately my bill at the end of the month","when I am trying to figure out how much","spend I need to use Cosmos DB?",">>Sure. So let's demystify Request Units.","On the surface, they sound like","a very complicated scary thing.","However, as you dive into it,","you will actually understand","that this is actually incredibly","simple and yields a lot of benefits for understanding.","So let's start with a Request Unit.","What is a Request Unit?","A Request Unit is","a logical abstraction over all of","the physical resources it takes to","perform a operation in the database.","And so that may include things like the CPU,","the Memory, and the IO.","And basically if you think about","the world in terms of physical resources,","let's say I have a database today","that I'm running on-premise,","it is not using Cosmos DB just yet,","and it handles 1,000 requests per second,","or 1,000 writes per second.","And if we do our capacity","modeling on the application side,","what we are finding is with the current growth rate,","we are going to go from a 1,000 writes","per second to 2,000 writes per second.","How much CPU do you add or how much memory do you add?.",">>I don't know. I would guess saying you are right.","You look at it.","You are just guessing.","Are you either going to over or under provision.","And so how does that figure into this?",">>So, rather than having","to do some bench-marking or stress testing to","identify memory as perhaps the current bottleneck","and then kind of just rolling the dice","and adding some random number of","gigabytes of RAM and","then hoping that your performance target,","what Request Units do is,","this is a logical abstraction","over all of these physical resources.","And the reason why this becomes useful,","is if you actually look at the number of","physical resources it takes","for let's say a create operation,","versus a read operation,","versus an update, delete,","or a query, that these","are actually going to take different","amounts of system resources.","For example, on a read operation","what I can do is I can have","a single replica and just","fetch a record and bring it back out.","Whereas on a create operation","what I am going to have to do is I am going","have to index that record as well as","I am going to have to replicate it to all replicas.","And for that reason,","read requests are anchored about one Request Unit","for session consistency on","a one KB record on default indexing.","For a create request,","because you have this indexing overhead","as well as its replication overhead,","it's going to be roughly around five RU","for session one KB.","And of course, each of these different operations","will take a variable number of Request Units.","Now, where this comes back","into this whole capacity forecasting","and estimating the cost of","my system and how do I","actually manage the scale of Cosmos DB,","what you're going to want to do","is for your actual record,","you are going to run a set of operations,","things that are representative of your system.","So let's say I have a system that needs 1,000 writes per","second and 500 reads per second.","What I'm going to do is, I'm going to do","just a test where I will do a test create request,","a test read request of","a representative record in my system,","and I'm also going to take","a look at how many Request Units","is for that one write operation.","So let's say what we saw back","on the response is five Request Units for write and","we see maybe one Request Unit for this read request.","If we were to now do this math,","what I need is 1,000 writes per second to support that,","and each of these is going to cost five.","I'll need 5,000 Request Units here,","and over here if I have","500 reads per second and each costs one,","I'm going to have 500 RU to","support that read request volume.","And what this says to me is I need to provision","5,500 Request Units per second in","order to support a workload","that has these kind of targets.","Now tomorrow, let's say in the same example,","I'm going to go from 1,000 writes per","second to 2,000 writes per second.","What that does is, it changes my math to, from 5,000,","I now need 10,000","Request Units per second for the write path.","And what that means is I just go","to the portal and I scale up","from 500 Requests Units","per second to 10,500 Request Units","per second and Cosmos DB will elastically","scale and provision that","amount of resources so that you","can actually hit this throughput target.","The important things are to remember","like this is very simple for crowd requests.","The one outlier is going to be query.","For query, this actually depends on","a number of other factors","including how many results I have,","is this using the index,","is this forcing a full scan through","the underlying container or an underlying partition.","And the thing that you will really want to think","about for a query if you want to ballpark this,","the easy way to think about","this is the number of query results.",">>So that would give me like","an estimate and talk and actually put my query into","that system and do some real benchmarking.","But if I know the number query results I can","probably get in a ballpark just","enough to that initial provisioning","or test of Cosmos DB database.",">>So if you're for example","expecting about 20 records to come back,","you can think of the request charge for a query to be","approximately 20 individual reads","plus a little query in indexing overhead,","but that's going to be minimal.","But this gives you a very good way of","approximating how many Request Units you need here.","And with these values,","you can easily now estimate.","What is the cost of running the system,","and how much you need to provision","as well as dynamically,","if I want to scale up,","scale down, what value should I choose?.","The other thing to keep in mind here is Cosmos DB","actually allows you to change its value at any time.","And what it does is it builds you hourly.","What that means is that if you","have let's say a database scenario","where I see most of","the incoming throughput from the hours 9-5,","what I can do is I can actually build","a system that scales up from hours 9-5,","and scale back down after hours so that I can","actually really optimize and not have to provision","peak throughput throughout my entire day.",">>Yes it sounds like with Request Units","and the combination of you being","able to control the scale yourself or","how many Requests Units you are allocating,","it gives you a lot of control over how you","want to or how performant you want","the database to be and how much you want it to","match that usage curve of your actual application."]}