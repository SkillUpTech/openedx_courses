{"start":[0,2190,4480,7080,10430,12090,14445,16110,18080,20640,23860,25470,26910,28560,30435,31920,33655,36045,38550,39870,42150,46300,47760,49380,51305,54810,56280,58838,60840,64620,66690,68479,70860,74055,76410,79500,80760,83415,84775,86485,88380,89640,91775,94490,97290,98850,100895,104070,105630],"end":[2190,4480,7080,10430,12090,14445,16110,18080,20640,23860,25470,26910,28560,30435,31920,33655,36045,38550,39870,42150,46300,47760,49380,51305,54810,56280,58838,60840,64620,66690,68479,70860,74055,76410,79500,80760,83415,84775,86485,88380,89640,91775,94490,97290,98850,100895,104070,105630,108000],"text":[">>So Andrew, I've done a lot of","relational database work where I'd go in and","do transactions to protect me from","one silly mistake really messing up my data structure.","You talked about transactions in","the document DB API for Cosmos DB.","Can you tell me more about","that because we're definitely very interested.",">>Okay. So an important thing","to remember is that when you're playing with","a relational database system","these are really built to scale","up meaning that if you want","to scale you buy a bigger machine.","And they are really optimized","around running on a single machine,","whereas when you are working with distributed systems,","distributed transactions is a whole another ballgame.","And for that reason this is why you","see a lot of other distributed databases","like Dynamo DB do not support multi-record transactions.","We felt this was a bit","extreme and so we're trying to actually find","a good middle ground and what","Cosmos DB does is through the document DB API we","actually expose mechanisms for","doing multi-record transactions scoped","to a partition key which","means this will run in the scope of a single machine.","This is exposed through the stored procedure","and Trigger API","and what we do is we actually","optimize around concurrency and latency.","And the way we do that is rather than","having a locking mechanism for handling the transaction.","What we do is when you run","a body of JavaScript sort procedure,","what we'll do is we'll actually give you","snapshot isolation and which","within the business logic it's operating","off of kind of like","a virtual snapshot to","give isolation across other concurrent operations.","And then if that sort procedure runs to completion,","what we'll do is we'll actually commit","that in an all or nothing fashion.","And so let's take a look at an example here and","dive into the code to see","how do you actually leverage this."]}