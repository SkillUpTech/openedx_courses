{"start":[1480,3980,5660,8120,10880,12645,15845,20590,21750,23190,24930,28270,32070,34020,36270,39965,43590,45100,47170,49735,52975,55300,57595,59325,62050,64700,66880,68290,71110,73630,75990,78150,81700,83250,85060,89140,93090,96550,98470,101425,106060,108400,112095,114535,118566,120880,122965,125860,128405,129700,131275,133960,137425,140815,145555,148630,151960,154840,158140,161425,162580,164955,166900,168910,170625,171790,175060,176440,178515,181080,183310,187383,189570,192510,196735,201880,204720,210030,215580,219930,221720,223800,225930,228150,230500,232460,234880,237470,238990,241930,244070,247180,250440,252700,254050,255670,257650,261255,264540,266465,269440,273197,277150,278430,279510,281530,285450,286960,288520,291940,294610,298450,302148,304853,309190,313140,316420,318130,320013,322030,325020,328525,333310,335800,338975,342601,344135,346390,348140,351480,354160],"end":[3980,5660,8120,10880,12645,15845,20590,21750,23190,24930,28270,32070,34020,36270,39965,43590,45100,47170,49735,52975,55300,57595,59325,62050,64700,66880,68290,71110,73630,75990,78150,81700,83250,85060,89140,93090,96550,98470,101425,106060,108400,112095,114535,118566,120880,122965,125860,128405,129700,131275,133960,137425,140815,145555,148630,151960,154840,158140,161425,162580,164955,166900,168910,170625,171790,175060,176440,178515,181080,183310,187383,189570,192510,196735,201880,204720,210030,215580,219930,221720,223800,225930,228150,230500,232460,234880,237470,238990,241930,244070,247180,250440,252700,254050,255670,257650,261255,264540,266465,269440,273197,277150,278430,279510,281530,285450,286960,288520,291940,294610,298450,302148,304853,309190,313140,316420,318130,320013,322030,325020,328525,333310,335800,338975,342601,344135,346390,348140,351480,354160,358000],"text":["In this video, I'm going to show you how you can","configure a global distribution on","your Azure Cosmos DB account in which it can","replicate your account to additional regions,","you can remove regions.","You can also configure a set of policies for","performing automatic failover or manual failover.","The first thing you're going to want to do","is you're going to want to navigate to","the Azure portal and open up","the bindings for your Azure Cosmos DB accounts.","Here, I have a blade open for an account I've already","provisioned and what you're going to see","here is on the left hand side under settings,","I have an option called 'replicate data globally'.","When I click on replicate data globally,","what you can see here is I have a map in","which I can select additional regions.","So, if I wanted to add instances","of my database and replicate to let's say Australia,","Japan and Central India,","I can click on these regions on the map.","And I can also remove regions.","So, let's say I have a region, a replica,","already located in West Europe and I want to remove it,","I can also deselect it and click save.","Once I click save,Cosmos DB will","automatically start booting out and","replicating some instances in","the new additional regions that I've configure.","It will also automatically do the tearing down of","the regions that I want to remove.","Now, once you have a set of regions","for your Cosmos DB account,","you can also configure the automatic failover policy.","What this allows you to do is in the event of an outage,","we can gracefully fail back to a number of","other Azure regions so","that the application maintains availability.","The Cosmos DB model is, today,","writes are affinitized to","a single region while reads are made ubiquitous to all.","And right now what I have is, on this account,","I have a write region defined as Central US and","a large number of","secondary read-only regions in","which I can get low latency read requests from.","Now, when I turn on automatic failover,","well, what happened is, in the event","of an outage in Central US,","what will happen is Southeast Asia will be automatically","promoted to my write region.","In the event of an outage in Southeast Asia,","North Europe will be the next region in line to","serve write requests out of and replicate over","to the other global regions.","Now, let's say I don't want Southeast Asia as","my fallback region for Central US because","geographically that's actually quite far and the impact","for write latency for","my application actually might be quite high.","So, what I can do is I can actually configure","what is the priority of different regions by","dragging and dropping these regions","so that in the event of","Central US experiencing an outage due to some kind of,","let's say, natural disaster whether it's","a hurricane or earthquake or something else,","it will fail back to West US as it's","next preferred write region and then East US","too and so forth.","In addition to configuring","failover policies at a server level,","you can also configure a list of preferred locations that","connects to a priority list on the client's level.","So here I have some sample code for how you would","instantiate a Cosmos DB client using the dotnet SDK.","The other SDKs look really quite similar so you can look","at the documentation for","what is the equivalent in the other SDKs.","Here, what I'm doing","is I'm constructing a new document client to","connect to Cosmos DB and what you'll see","here is it takes in an end point parameter,","a code of connection policy.","The connection policy, it can","also set a list of preferred locations.","What I'm doing here is,","for this client, I'm configuring it to prefer East US.","In the event of an outage in East US,","it will fail back to North Europe,","Southeast Asia and so forth.","The reason why you'd want to do a set of","preferred locations both on","the client as well as the server,","is you may have","application instances also deployed all around the world.","If I have an application instance deployed in East US,","North Europe and Southeast Asia,","the instance that is deployed in East US or connects to","East US to ensure the lowest latency or write or reads.","Meanwhile, another instance of","the application that is deployed","in North Europe or actually","want to prefer North Europe as it's","first preferred region so that it gets low latency and","an application instance in","Southeast Asia will want to prefer to","connect to the region closest to it as well.","This way, each of the application instances deployed all","around the world get very very low latencies.","In addition to automatic failover,","you can also perform manual failover.","Whether you want to test failover and your application,","or just make sure your application is resilient,","or you want to rehome the write region let's","say instead of having Central US","as my current write region,","you want to home write it to West US,","you can select from this list of read regions and","promote any single one of them to the write region","and click OK. What Cosmos DB will do is it will make","sure the region that you're promoting","to be your next write region,","it'll be fully caught up to your current write region,","trained the replication queue and","once it's fully caught up it will re-home all","of the writes to","the new write region that you've configured.","This concludes our video on","global distribution. Thank you for watching."]}